<div class="caixa-container">

    <div class="valores">
        <div class="caixa-economias">
            <mat-card class="econmias-card">
                <mat-list role="ecnomias"  *ngIf="economias">
                    <mat-list-item role="economias-item">Poupança: {{ economias.poupanca | currency:'BRL' }}</mat-list-item>
                    <mat-list-item role="economias-item">FGTS: {{ economias.fgts | currency:'BRL' }}</mat-list-item>
                    <mat-list-item role="economias-item">CDB: {{ economias.cdb | currency:'BRL' }}</mat-list-item>
                    <mat-list-item role="economias-item">Tesouro: {{ economias.tesouro | currency:'BRL' }}</mat-list-item>
                    <mat-divider></mat-divider>
                    <mat-list-item role="economias-item">{{ totalEconomias | currency:'BRL' }}</mat-list-item>
                </mat-list>
            </mat-card >
        </div> 

        <div class="caixa-meta">
            <mat-card class="caixa-card">
                <mat-list role="caixa-meta" *ngIf="caixa" class="caixa-list"> 
                    <mat-list-item *ngFor="let item of caixa"> 
                        <mat-checkbox #c (click)="marcaItemCaixa(item, !c.checked)">&nbsp;</mat-checkbox>
                        <span matPrefix>{{ item.investimento }}:&nbsp;R$</span>
                        <form [formGroup]="formCaixa" (keydown)="keyDownFunction($event, item)" > 
                            <input matInput name="valor" value="{{ item.valor }}" type="number"  formControlName="valor"> 
                        </form>
                    </mat-list-item>
                    <mat-divider></mat-divider>
                    <mat-list-item role="caixa-meta-item">{{ totalCaixa | currency:'BRL' }}</mat-list-item>
                </mat-list>            
            </mat-card>
        </div> 

        <div class="total-entrada">
            <mat-card class="total-entrada-card">            
                <p>Total: {{ total | currency:'BRL' }}</p>
                <p>Entrada: {{ entrada | currency:'BRL' }}</p>
            </mat-card>
        </div> 

    </div>

    <div class="simulacao"> 
        <mat-card class="simulacao-card">
            <mat-card-header>
                <mat-card-title>Simulação</mat-card-title>
                <mat-card-subtitle>Data da simulação: <strong>09/07/2019</strong> | Taxa de juros efetiva com bonificação: <strong>7,99</strong> % a.a. <strong>0,64</strong> % a.m. + TR | Custo Efetivo Total (CET) com bonificação: <strong>8,60</strong> % a.a. | <br> Custo Efetivo do Seguro Habitacional (CESH): <strong>2,4584</strong> % | Prazo: <strong>35</strong> anos</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <table mat-table #tableSimulacao [dataSource]="simulacoes" class="tabela-simulacao">
                    <ng-container matColumnDef="composicao">
                        <th mat-header-cell *matHeaderCellDef> Composição </th>
                        <td mat-cell *matCellDef="let simulacao"> {{simulacao.composicao}} </td>
                    </ng-container>
                    <ng-container matColumnDef="total">
                        <th mat-header-cell *matHeaderCellDef> Total </th>
                        <td mat-cell *matCellDef="let simulacao"> {{simulacao.total}} </td>
                    </ng-container>
                    <ng-container matColumnDef="entrada">
                        <th mat-header-cell *matHeaderCellDef> Entrada </th>
                        <td mat-cell *matCellDef="let simulacao"> {{simulacao.entrada}} </td>
                    </ng-container>
                    <ng-container matColumnDef="pctEntrada">
                        <th mat-header-cell *matHeaderCellDef> % </th>
                        <td mat-cell *matCellDef="let simulacao"> {{simulacao.pctEntrada}} </td>
                    </ng-container>
                    <ng-container matColumnDef="financiamento">
                        <th mat-header-cell *matHeaderCellDef> Financiamento </th>
                        <td mat-cell *matCellDef="let simulacao"> {{simulacao.financiamento}} </td>
                    </ng-container>
                    <ng-container matColumnDef="pctFinanciamento">
                        <th mat-header-cell *matHeaderCellDef> % </th>
                        <td mat-cell *matCellDef="let simulacao"> {{simulacao.pctFinanciamento}} </td>
                    </ng-container>
                    <ng-container matColumnDef="reforma">
                        <th mat-header-cell *matHeaderCellDef> Reforma </th>
                        <td mat-cell *matCellDef="let simulacao"> {{simulacao.reforma}} </td>
                    </ng-container>
                    <ng-container matColumnDef="vlParcela">
                        <th mat-header-cell *matHeaderCellDef> Vl. 1ª Parcela </th>
                        <td mat-cell *matCellDef="let simulacao"> {{simulacao.vlParcela}} </td>
                    </ng-container>
                    <ng-container matColumnDef="finTaxas">
                        <th mat-header-cell *matHeaderCellDef> Fin. Taxas </th>
                        <td mat-cell *matCellDef="let simulacao"> {{simulacao.finTaxas}} </td>
                    </ng-container>
                    <ng-container matColumnDef="comporRenda">
                        <th mat-header-cell *matHeaderCellDef> Compor Renda </th>
                        <td mat-cell *matCellDef="let simulacao"> {{simulacao.comporRenda}} </td>
                    </ng-container>   
                    
                    <tr mat-header-row *matHeaderRowDef="colunasSimulacao"></tr>
                    <tr mat-row *matRowDef="let simulacao; columns: colunasSimulacao;"></tr>
                </table>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button (click)="addSimulacao()"><mat-icon>add</mat-icon></button>
                <button mat-button disabled="true"><mat-icon>save</mat-icon></button>
            </mat-card-actions>
        </mat-card>
    </div>

</div>